# Tor configuration for hidden service + SOCKS proxy
SocksPort 9050 # Enable SOCKS proxy for fetching onion URLs
HiddenServiceDir /var/lib/tor/hidden_service/
HiddenServicePort 80 127.0.0.1:8080

# Security settings
DataDirectory /var/lib/tor
RunAsDaemon 1
User tor

# CRITICAL: Ensure we are NOT an exit node
ExitPolicy reject *:*
ExitRelay 0

# Disable relay functionality completely
ORPort 0
DirPort 0
BridgeRelay 0

# Logging
Log notice file /var/log/tor/notices.log

# Allow connections from localhost for metadata fetching
SocksPolicy accept 127.0.0.1
SocksPolicy reject *

# Additional security
ClientOnly 1